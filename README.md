# 南山区新房分布可视化地图系统

基于高德地图的新房分布可视化地图系统，以南山区为核心，支持不同层级展示板块和新房点位信息，具备基础交互和可视化能力。

## 功能特性

### 🗺️ 地图展示
- 基于高德地图 JS API v2.0
- 南山区中心定位 [113.929, 22.541]
- 缩放级别严格限制在 10-18 之间
- 响应式设计，支持移动端

### 🏘️ 板块展示
- **缩放级别 10-13**：显示板块多边形 + 名称 + 楼盘数量
- **缩放级别 13-18**：显示板块名称（小字体）+ 新房点位
- 8个街道板块：南头、南山、蛇口、招商、粤海、沙河、西丽、桃源
- 自定义颜色和透明度

### 🏢 新房点位
- 16个示例楼盘项目
- 状态标识：在售（绿色）、待售（灰色）
- 点击显示详细信息（价格、面积、总价）
- 双击打开项目链接

### 🔍 搜索功能
- 右上角搜索框
- 模糊匹配项目名称
- 点击结果自动定位并显示详情

### ✏️ 画笔工具
- 左上角工具栏
- 开启/关闭绘图模式
- 自由绘制涂鸦
- 清除画布功能
- 支持触摸设备

### 💾 本地缓存
- localStorage 缓存板块和项目数据
- 提升页面加载速度
- 支持离线浏览

## 文件结构

```
project-root/
├── index.html          # 主页面
├── style.css           # 样式文件
├── main.js             # 地图逻辑与交互功能
├── blocks.json         # 板块数据（Polygon）
├── projects.json       # 新房点数据（Marker）
├── utils/
│   └── draw.js         # 自定义画笔工具逻辑
└── README.md           # 项目说明
```

## 使用方法

### 1. 直接打开
双击 `index.html` 文件在浏览器中打开

### 2. 本地服务器（推荐）
```bash
# 使用 Python 启动本地服务器
python -m http.server 8000

# 或使用 Node.js
npx http-server

# 然后访问 http://localhost:8000
```

### 3. 功能操作
- **缩放地图**：鼠标滚轮或地图控件
- **搜索项目**：在右上角搜索框输入项目名
- **查看详情**：点击新房点位
- **访问链接**：双击新房点位
- **开启绘图**：点击左上角"开启绘图"按钮
- **清除绘图**：点击"清除绘图"按钮

## 技术栈

| 组件 | 技术工具 | 用途 |
|------|----------|------|
| 地图引擎 | 高德地图 JS API v2.0 | 显示地图、绘制多边形与点位 |
| 页面构建 | 原生 HTML/CSS/JS | 保持简单，无需引入框架 |
| 本地缓存 | localStorage | 缓存多边形与新房数据 |
| 手绘工具 | HTML5 Canvas | 自定义涂鸦绘图工具 |
| 搜索功能 | 自定义正则匹配 | 实现新房模糊搜索 |

## 配置说明

### 高德地图配置
- **API Key**: `ae9e41fad1e95c52601814053f0ad510`
- **安全密钥**: `2f922f3dfca8c92a9b308bac7f3bd89d`

### 地图参数
```javascript
const MAP_CONFIG = {
    center: [113.929, 22.541], // 南山区中心
    zoom: 13,                  // 默认缩放级别
    minZoom: 10,              // 最小缩放级别（严格限制）
    maxZoom: 18               // 最大缩放级别（严格限制）
};
```

## 数据格式

### 板块数据 (blocks.json)
```json
{
    "name": "街道名称",
    "coordinates": [[经度, 纬度], ...], // 多边形坐标数组
    "color": "#FF6B6B",                // 填充颜色
    "borderColor": "#FF5252",          // 边框颜色
    "opacity": 0.6                     // 透明度
}
```

### 项目数据 (projects.json)
```json
{
    "name": "项目名称",
    "coordinates": [经度, 纬度],        // 点位坐标
    "status": "on-sale",              // 状态：on-sale/pending
    "price": "15万/㎡",               // 单价
    "area": "88-168㎡",               // 面积范围
    "totalPrice": "1320-2520万",      // 总价范围
    "url": "https://example.com"      // 项目链接
}
```

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 11+
- Edge 79+
- 移动端浏览器

## 注意事项

1. 需要网络连接加载高德地图API
2. 首次加载会从JSON文件读取数据并缓存
3. 画笔功能在绘图模式下会禁用地图交互
4. 建议使用现代浏览器以获得最佳体验

## 扩展功能

可以考虑添加的功能：
- 更多画笔颜色和粗细选择
- 绘图内容保存和加载
- 更智能的搜索（使用 Fuse.js）
- 数据导入导出功能
- 统计图表展示
- 路径规划功能

## 许可证

MIT License 